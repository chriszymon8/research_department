<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Gentry</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .card:hover .add-btn {
      opacity: 1;
      transform: translateY(0);
    }
    .add-btn {
      opacity: 0;
      transform: translateY(10px);
      transition: all 0.2s ease-in-out;
    }
  </style>
</head>
<body class="bg-gray-100 text-gray-800">
  <header class="bg-white shadow-sm py-4 px-8 flex justify-between items-center">
    <a href="/index.html"><img src="/gentry_logo_latest_rev.avif" alt=""></a>
    <div class="flex items-center gap-4 w-1/2">
      <input id="searchInput" type="text" placeholder="What do you search about?"
        class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring focus:ring-gray-200">
    </div>
    <div class="flex items-center gap-6 text-sm text-gray-600">
      <a href="#">Account</a>
      <a href="#">My Cart (<span id="cartCount">0</span>)</a>
      <a href="#">Log Out</a>
    </div>
  </header>

  <!-- Main Content -->
  <div class="max-w-7xl mx-auto my-8 px-6 grid grid-cols-12 gap-6">
    <!-- Sidebar -->
    <aside class="col-span-3 bg-white rounded-lg shadow p-4">
      <h2 class="text-lg font-semibold mb-4 border-b pb-2">Filters</h2>
      
      <div class="mb-4">
        <h3 class="font-medium mb-2 text-gray-700">Category</h3>
        <div class="flex flex-col gap-1 text-sm text-gray-600">
          <label><input type="checkbox" class="cat-filter" value="Men" checked> Men</label>
          <label><input type="checkbox" class="cat-filter" value="Women"> Women</label>
          <label><input type="checkbox" class="cat-filter" value="Kids"> Kids</label>
        </div>
      </div>

      <div class="mb-4">
        <h3 class="font-medium mb-2 text-gray-700">Brand</h3>
        <div class="flex flex-col gap-1 text-sm text-gray-600">
          <label><input type="checkbox" class="brand-filter" value="Apple" checked> Apple</label>
          <label><input type="checkbox" class="brand-filter" value="Samsung" checked> Samsung</label>
          <label><input type="checkbox" class="brand-filter" value="OnePlus" checked> OnePlus</label>
          <label><input type="checkbox" class="brand-filter" value="Realme" checked> Realme</label>
        </div>
      </div>

      <div class="mb-4">
        <h3 class="font-medium mb-2 text-gray-700">Price Range (RM)</h3>
        <div class="flex items-center gap-2 text-sm">
          <input id="minPrice" type="number" min="0" value="0"
            class="w-1/2 border rounded px-2 py-1">
          <span>-</span>
          <input id="maxPrice" type="number" min="0" value="1000"
            class="w-1/2 border rounded px-2 py-1">
        </div>
        <button id="applyPrice"
          class="mt-3 w-full bg-gray-800 text-white text-sm py-2 rounded hover:bg-gray-700">
          Apply
        </button>
      </div>

      <div>
        <h3 class="font-medium mb-2 text-gray-700">Availability</h3>
        <label class="text-sm text-gray-600"><input type="checkbox" id="instock" checked> In stock only</label>
      </div>
    </aside>

    <!-- Product List -->
    <main class="col-span-9">
      <div class="flex justify-between items-center mb-4">
        <div class="text-sm text-gray-600"><span id="resultCount">0</span> Products Found</div>
        <div>
          <label for="sort" class="text-sm text-gray-600">Sort by:</label>
          <select id="sort" class="border border-gray-300 rounded px-2 py-1 text-sm">
            <option value="relevancy">Relevancy</option>
            <option value="price-asc">Price: Low → High</option>
            <option value="price-desc">Price: High → Low</option>
          </select>
        </div>
      </div>

      <div id="productGrid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"></div>
    </main>
  </div>

  <script>
    // Generate 50 sample products
    const brands = ["Apple", "Samsung", "OnePlus", "Realme"];
    const categories = ["Men", "Women", "Kids"];
    const images = [
      "https://i.imgur.com/1A6s2sR.png",
      "https://i.imgur.com/rbI1xgL.png",
      "https://i.imgur.com/xS8nHhX.png",
      "https://i.imgur.com/QG1evA8.png"
    ];

    const products = Array.from({ length: 50 }, (_, i) => {
      const brand = brands[Math.floor(Math.random() * brands.length)];
      const category = categories[Math.floor(Math.random() * categories.length)];
      const price = Math.floor(Math.random() * 800) + 200;
      const stock = Math.random() > 0.2;
      const img = images[Math.floor(Math.random() * images.length)];
      return {
        id: i + 1,
        name: `${brand} Smart Watch ${i + 1}`,
        brand, category, price, stock, img
      };
    });

    // DOM elements
    const grid = document.getElementById("productGrid");
    const resultCount = document.getElementById("resultCount");
    const cartCount = document.getElementById("cartCount");
    const brandFilters = document.querySelectorAll(".brand-filter");
    const catFilters = document.querySelectorAll(".cat-filter");
    const minPrice = document.getElementById("minPrice");
    const maxPrice = document.getElementById("maxPrice");
    const applyPrice = document.getElementById("applyPrice");
    const instock = document.getElementById("instock");
    const sort = document.getElementById("sort");
    const searchInput = document.getElementById("searchInput");
    let cart = 0;

    function renderProducts(list) {
      grid.innerHTML = "";
      resultCount.textContent = list.length;
      list.forEach(p => {
        const card = document.createElement("div");
        card.className = "card bg-white rounded-lg shadow hover:shadow-lg p-4 relative";
        card.innerHTML = `
          <div class="absolute right-3 top-3 text-gray-400 text-lg">♡</div>
          <img src="${p.img}" alt="${p.name}" class="h-32 mx-auto mb-3">
          <h3 class="font-semibold text-sm">${p.name}</h3>
          <p class="text-xs text-gray-500 mb-2">${p.brand}</p>
          <p class="font-bold text-gray-800 mb-2">RM ${p.price}</p>
          <p class="text-xs ${p.stock ? 'text-green-600' : 'text-red-500'} mb-4">
            ${p.stock ? 'In stock' : 'Out of stock'}
          </p>
          <button class="add-btn bg-gray-900 text-white text-xs px-3 py-2 rounded w-full ${!p.stock ? 'opacity-50 cursor-not-allowed' : 'hover:bg-gray-700'}"
            ${!p.stock ? 'disabled' : ''} data-id="${p.id}">
            Add to Cart
          </button>
        `;
        grid.appendChild(card);
      });
      document.querySelectorAll(".add-btn").forEach(btn => {
        btn.addEventListener("click", () => {
          cart++;
          cartCount.textContent = cart;
          btn.textContent = "Added ✓";
          btn.disabled = true;
        });
      });
    }
    
    function filterProducts() {
      const selectedBrands = [...brandFilters].filter(b => b.checked).map(b => b.value);
      const selectedCats = [...catFilters].filter(c => c.checked).map(c => c.value);
      const min = Number(minPrice.value) || 0;
      const max = Number(maxPrice.value) || Infinity;
      const search = searchInput.value.toLowerCase();

      let filtered = products.filter(p =>
        selectedBrands.includes(p.brand) &&
        selectedCats.includes(p.category) &&
        p.price >= min && p.price <= max &&
        (!instock.checked || p.stock) &&
        p.name.toLowerCase().includes(search)
      );

      if (sort.value === "price-asc") filtered.sort((a, b) => a.price - b.price);
      else if (sort.value === "price-desc") filtered.sort((a, b) => b.price - a.price);

      renderProducts(filtered);
    }

    // Event listeners
    [applyPrice, sort, instock].forEach(el => el.addEventListener("change", filterProducts));
    [...brandFilters, ...catFilters].forEach(cb => cb.addEventListener("change", filterProducts));
    searchInput.addEventListener("input", () => setTimeout(filterProducts, 200));

    renderProducts(products);
  </script>
</body>
</html>
